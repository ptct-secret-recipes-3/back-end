
## Ptct-Secret-Recipes-3
### Back-End
*Notes for Front-End*

Below you'll find the info you need to build the front-end, including the baseURL, API endpoints, and the data schemas.
#### Base URL: 

- (Need to deploy to Heroku)

#### API Endpoints: 

- Login: 
- Register: 

    ##### CRUD Endpoints (GET/POST/UPDATE/DELETE)
    - `[GET] /api/recipes` returns an array of recipes (or an empty array if there aren't any).
    - `[GET] /api/recipes/:id` returns a recipe by the given id.
    - `[POST] /api/recipes` returns the created recipe. 
    - `[PUT] /api/recipes/:id` returns the updated recipe. 
    - `[DELETE] /api/recipes/:id` returns the deleted recipe.
 
#### DATA SCHEMAS (Incomplete)
(***Back-end: Create Seeds & Migration tables using Knex***)
##### Login 

| Syntax      | Description |
| ----------- | ----------- |
| Header      | Title       |
| Paragraph   | Text        |

##### Register

| Syntax      | Description |
| ----------- | ----------- |
| Header      | Title       |
| Paragraph   | Text        |


#### Recipes Schema

| field  | data type        | metadata                                            |
| ------ | ---------------- | --------------------------------------------------- |
| id     | unsigned integer | primary key, auto-increments, generated by database |
| name   | string           | required, unique                                    |
| budget | numeric          | required                                            |



--------------------------------------------------------------------------------------------------------------------------------------
### *Back-End only notes:*

- `npm` commands (create scripts in package.json): 
    - `npm run server`
    - `npm run migrate`
    - `npm run seed`
    - `npm reset db`
    (Include testing scripts)
#### *Build Model Functions*

- db access functions inside `api/recipes/recipes-model.js` using Knex:

  - `getAll` resolves to an array of recipes (or an empty array)
  - `getById` resolves to an recipe by the given id
  - `create` resolves to the newly created recipe
  - `updateById` resolves to the updated recipe
  - `deleteById` resolves to the deleted recipe

#### *Write Middleware*

- Inside `api/middleware/recipes-middleware.js`:

  - `checkRecipePayload` returns a status 400 with if `req.body` is invalid:

    - If either _title_  _source_ _ingredients_ or _instructions_ are undefined, return `{ message: "All fields are required" }`
    - If _title_ is not a string, return `{ message: "title of recipe must be a string" }`
    - If the _title_ is shorter than 3 or longer than 100, return `{ message: "title of recipe must be between 3 and 100" }`

  - `checkRecipeId` returns a status 404 with a `{ message: "recipe not found" }` if `req.params.id` does not exist in the database

  - `checkTitleNameUnique` returns a status 400 with a `{ message: "That recipe has already been added!" }` if the `req.body.name` already exists in the database

- Inside `api/middleware/restricted.js`:

    -`restricted` 

---------------------------------------------------------------------------------------------------------------------------------------
  
Basic Markdown syntax guide:
https://www.markdownguide.org/basic-syntax/
